<template name="promotion_listing">



 <!-- <body style="background-color: #F5F5F5 !important;"> -->
 <body>
  {{> display_promotion_listing}}
</body>
</template>

<template name="display_promotion_listing"> 

<div class="loading"  id="loading_div" ></div>
{{>left_panel_admin}}
 
<div class="">
  <div class="content-bg-wrap"></div>
  <div class="row">
    <div class="col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
      <div class="ui-block responsive-flex">
        <div class="container ui-block-title" style="padding-left: 4%;">

  <input type="button" onclick="tableToExcel('show_promotion_listing', 'W3C Example Table')" value="Export to Excel">
  
        <h1 style="font-size: 30px; font-weight: 500;">Promotion management</h1>
          <!-- <div class="h6 title">Promotion management</div> -->
          <div class="align-right">
            <a class="js-open-popupbtn btn-primary btn-md-2 c-grey" data-popup-target=".playlist-popup" id="create_promotion" >
              <span id="save_text" class="c-white pointer"> Create promotion</span></a></div>          
        </div>
      </div>
    </div>
  </div>


</div>
  <div class="row">
    <div class="col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

      <div class="ui-block">
        <div class="container" style="padding: 2% 4%;">        
        <!-- Forums Table -->      

        <table class="forums-table table datatable" id="show_promotion_listing" >
        
          <thead>
        
          <tr>
            <th class="forum">
              Promotion Title
            </th>

            <th class="posts">
              Promotion type
            </th>

            <th class="forum">
              Promotion Content
            </th> 
        
            <th class="topics">
              Promotion Start Date
            </th>
        
            <th class="posts">
              Promotion End date
            </th>
        
            <th class="freshness">
              Promotion link
            </th>
        
            <th class="freshness">
              Action
            </th> 
          </tr> 
        
          
        
          </thead>
        
          <tbody>
          {{#each show_promotion_details}}       
          <tr>
            <td class="topics">
              <p class="text">{{promotion_title_trimmed}}</p>
            </td>

            <td class="freshness">
              <div class="author-freshness">
                {{promotion_type}}
              </div>
            </td>

            <td class="posts">
        {{#if equals promotion_type 'Textual'}}
              <div class="author-freshness">
                {{promotion_content_trimmed}}
              </div>
        {{else}}
              <img src="{{promotion_content}}">
        {{/if}}
            </td>
            <td class="freshness">
              <div class="author-freshness">
                {{promotion_start_date}}
              </div>
            </td>
            <td class="freshness">
              <div class="author-freshness">{{promotion_end_date}}</div>
            </td>

            <td class="freshness">
              <a href="{{promotion_url}}" class="h6 count" target="_blank" >{{promotion_url_trimmed}}</a>
            </td>

            <td class="freshness">
              <div class="author-freshness">
                <button class="edit_promotion_details btn-breez btn" id="{{promotion_id}}" > Edit </button>
              </div>
            </td>
          </tr>
          {{/each}}
          
        
          </tbody>
        </table>
        
        <!-- ... end Forums Table -->
      </div>

    </div>

  </div>
</div> 



<script type="text/javascript">
var tableToExcel = (function() {
  var uri = 'data:application/vnd.ms-excel;base64,'
    , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
    , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
    , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
  return function(table, name) {
    if (!table.nodeType) table = document.getElementById(table)
    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    window.location.href = uri + base64(format(template, ctx))
  }
})()
</script>

<!-- <input type="button" onclick="tableToExcel('testTable', 'W3C Example Table')" value="Export to Excel"> -->



</template>


